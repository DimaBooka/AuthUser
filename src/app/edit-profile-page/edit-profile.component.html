<h1>Summary</h1>

<div class="form-holder" *ngIf="editProfile; else showCurrentProfile">
  <form class="form-holder" (ngSubmit)="updateProfile();" [formGroup]="profileForm">

    <field-validator [inputField]="profileForm.get('name')" [labelText]="'Name'"
                     [inputErrors]="profileForm.get('name').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="Name" formControlName="name">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('surName')" [labelText]="'Surname'"
                     [inputErrors]="profileForm.get('surName').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="surName" formControlName="surName">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('dob')" [labelText]="'Date of Birthday'"
                     [inputErrors]="profileForm.get('dob').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <!--<input class="form-input" type="date" placeholder="mm/dd/yy" formControlName="dob">-->

        <my-date-picker name="dob" [options]="myDatePickerOptions" placeholder="mm/dd/yy" [selDate]="01/01/1990"
                        formControlName="dob"></my-date-picker>
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('phone')" [labelText]="'Phone'"
                     [inputErrors]="profileForm.get('phone').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" [textMask]="{mask: mask}" type="text" placeholder="+381 1234 9874" formControlName="phone">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('adress')" [labelText]="'Address'"
                     [inputErrors]="profileForm.get('adress').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="Address" formControlName="adress">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('city')" [labelText]="'City'"
                     [inputErrors]="profileForm.get('city').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="City" formControlName="city">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('country')" [labelText]="'Country'"
                     [inputErrors]="profileForm.get('country').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="Country" formControlName="country">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('username')" [labelText]="'Username'"
                     [inputErrors]="profileForm.get('username').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="Username" formControlName="username">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('password')" [labelText]="'Password'"
                     [inputErrors]="profileForm.get('password').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="Password" formControlName="password">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('employmentStatus')" [labelText]="'Employment status'"
                     [inputErrors]="profileForm.get('employmentStatus').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <!--<input class="form-input" type="text" placeholder="Employment status" formControlName="employmentStatus">-->
        <select formControlName="employmentStatus" (change)="checkStatusValue($event)">
          <option value="" selected disabled>Employment status</option>
          <option value="employed">Employed</option>
          <option value="unemployed">Unemployed</option>
          <option value="student">Student</option>
        </select>
      </div>
    </field-validator>

    <field-validator [ngStyle]="{'display': profileForm.get('employmentStatus').value === 'employed' ? 'flex' : 'none'}"
                     [inputField]="profileForm.get('employmentPlace')" [labelText]="'Place of employment'"
                     [inputErrors]="profileForm.get('employmentPlace').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="Place of employment" formControlName="employmentPlace">
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('annualIncome')" [labelText]="'Annual income'"
                     [inputErrors]="profileForm.get('annualIncome').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <select formControlName="annualIncome">
          <option value="" selected disabled>Annual income</option>
          <option value="0-500">$0 - $500</option>
          <option value="600-1500">$600 - $1500</option>
          <option value="1500-2000">$1500 - $2000</option>
          <option value="2000-5000">$2000 - $5000</option>
          <option value="5000+">$5000++</option>
        </select>
      </div>
    </field-validator>

    <field-validator [inputField]="profileForm.get('favouriteSport')" [labelText]="'Favourite sport'"
                     [inputErrors]="profileForm.get('favouriteSport').errors" [errorDefs]="validationMessages">
      <div class="form-group">
        <input class="form-input" type="text" placeholder="Favourite sport" formControlName="favouriteSport">
      </div>
    </field-validator>

    <input type="submit" class="input-group-submit" [disabled]="!profileForm.valid" value="Udate">

  </form>
  <button class="btn btn-flat" (click)="toggleForm()">Close</button>
</div>

<ng-template #showCurrentProfile>

  <div class="form-group">
    <span>{{profile.name}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.surName}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.dob.formatted}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.phone}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.adress}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.city}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.country}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.username}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.password}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.employmentStatus}}</span>
  </div>

  <div class="form-group" *ngIf="profile.employmentPlace">
    <span>{{profile.employmentPlace}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.annualIncome}}</span>
  </div>

  <div class="form-group">
    <span>{{profile.favouriteSport}}</span>
  </div>

  <button class="btn btn-flat" (click)="toggleForm()">Edit</button>

</ng-template>
